# ä¸ªäººåè¡€ç³»åˆ— - æ€»ç»“ MySQL
> MySQL è¿™ä¸€å—çš„çŸ¥è¯†è¿˜æ˜¯æŒºå¤šçš„ï¼Œé—®æ·±åº¦çš„è¯ï¼Œ ä¸€èˆ¬éƒ½æ˜¯å¦‚ä½•è°ƒä¼˜çš„ï¼Œå½“ç„¶å°‘ä¸äº† MySQL çš„åŸºç¡€ç­‰çŸ¥è¯†ã€‚

![](https://gitee.com/dreamcater/blog-img/raw/master/uPic/Mysql%E9%9D%A2%E8%AF%95%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-XMMJ7T.png)

### [](#æ•°æ®åº“å¼•æ“Žinnodbä¸Žmyisamçš„åŒºåˆ« "æ•°æ®åº“å¼•æ“Ž innodb ä¸Ž myisam çš„åŒºåˆ«")æ•°æ®åº“å¼•æ“Ž innodb ä¸Ž myisam çš„åŒºåˆ«

#### [](#InnoDB "InnoDB")InnoDB

æ˜¯ MySQL é»˜è®¤çš„**äº‹åŠ¡åž‹**å­˜å‚¨å¼•æ“Žï¼Œåªæœ‰åœ¨éœ€è¦å®ƒä¸æ”¯æŒçš„ç‰¹æ€§æ—¶ï¼Œæ‰è€ƒè™‘ä½¿ç”¨å…¶å®ƒå­˜å‚¨å¼•æ“Žã€‚

å®žçŽ°äº†å››ä¸ªæ ‡å‡†çš„éš”ç¦»çº§åˆ«ï¼Œé»˜è®¤çº§åˆ«æ˜¯**å¯é‡å¤è¯»** (REPEATABLE READ)ã€‚åœ¨å¯é‡å¤è¯»éš”ç¦»çº§åˆ«ä¸‹ï¼Œ**é€šè¿‡å¤šç‰ˆæœ¬å¹¶å‘æŽ§åˆ¶ (MVCC)+ é—´éš™é” (Next-Key Locking) é˜²æ­¢å¹»å½±è¯»ã€‚**

ä¸»ç´¢å¼•æ˜¯**èšç°‡ç´¢å¼•**ï¼Œåœ¨ç´¢å¼•ä¸­ä¿å­˜äº†æ•°æ®ï¼Œä»Žè€Œé¿å…ç›´æŽ¥è¯»å–ç£ç›˜ï¼Œå› æ­¤å¯¹æŸ¥è¯¢æ€§èƒ½æœ‰å¾ˆå¤§çš„æå‡ã€‚

å†…éƒ¨åšäº†å¾ˆå¤šä¼˜åŒ–ï¼ŒåŒ…æ‹¬ä»Žç£ç›˜è¯»å–æ•°æ®æ—¶é‡‡ç”¨çš„**å¯é¢„æµ‹æ€§è¯»**ã€èƒ½å¤ŸåŠ å¿«è¯»æ“ä½œå¹¶ä¸”è‡ªåŠ¨åˆ›å»ºçš„**è‡ªé€‚åº”å“ˆå¸Œç´¢å¼•**ã€èƒ½å¤ŸåŠ é€Ÿæ’å…¥æ“ä½œçš„æ’å…¥ç¼“å†²åŒºç­‰ã€‚

æ”¯æŒçœŸæ­£çš„**åœ¨çº¿çƒ­å¤‡ä»½**ã€‚å…¶å®ƒå­˜å‚¨å¼•æ“Žä¸æ”¯æŒåœ¨çº¿çƒ­å¤‡ä»½ï¼Œè¦èŽ·å–ä¸€è‡´æ€§è§†å›¾éœ€è¦åœæ­¢å¯¹æ‰€æœ‰è¡¨çš„å†™å…¥ï¼Œè€Œåœ¨è¯»å†™æ··åˆåœºæ™¯ä¸­ï¼Œåœæ­¢å†™å…¥å¯èƒ½ä¹Ÿæ„å‘³ç€åœæ­¢è¯»å–ã€‚

#### [](#MyISAM "MyISAM")MyISAM

è®¾è®¡ç®€å•ï¼Œæ•°æ®ä»¥**ç´§å¯†æ ¼å¼å­˜å‚¨**ã€‚å¯¹äºŽåªè¯»æ•°æ®ï¼Œæˆ–è€…è¡¨æ¯”è¾ƒå°ã€å¯ä»¥å®¹å¿ä¿®å¤æ“ä½œï¼Œåˆ™ä¾ç„¶å¯ä»¥ä½¿ç”¨å®ƒã€‚

æä¾›äº†å¤§é‡çš„ç‰¹æ€§ï¼ŒåŒ…æ‹¬**åŽ‹ç¼©è¡¨**ã€**ç©ºé—´æ•°æ®ç´¢å¼•**ç­‰ã€‚

**ä¸æ”¯æŒäº‹åŠ¡**ã€‚

**ä¸æ”¯æŒè¡Œçº§é”**ï¼Œåªèƒ½å¯¹æ•´å¼ è¡¨åŠ é”ï¼Œè¯»å–æ—¶ä¼šå¯¹éœ€è¦è¯»åˆ°çš„æ‰€æœ‰è¡¨åŠ å…±äº«é”ï¼Œå†™å…¥æ—¶åˆ™å¯¹è¡¨åŠ æŽ’å®ƒé”ã€‚ä½†åœ¨è¡¨æœ‰è¯»å–æ“ä½œçš„åŒæ—¶ï¼Œä¹Ÿå¯ä»¥å¾€è¡¨ä¸­æ’å…¥æ–°çš„è®°å½•ï¼Œè¿™è¢«ç§°ä¸ºå¹¶å‘æ’å…¥ (CONCURRENT INSERT)ã€‚

å¯ä»¥æ‰‹å·¥æˆ–è€…è‡ªåŠ¨æ‰§è¡Œæ£€æŸ¥å’Œä¿®å¤æ“ä½œï¼Œä½†æ˜¯å’Œäº‹åŠ¡æ¢å¤ä»¥åŠå´©æºƒæ¢å¤ä¸åŒï¼Œå¯èƒ½å¯¼è‡´ä¸€äº›æ•°æ®ä¸¢å¤±ï¼Œè€Œä¸”ä¿®å¤æ“ä½œæ˜¯éžå¸¸æ…¢çš„ã€‚

å¦‚æžœæŒ‡å®šäº† DELAY_KEY_WRITE é€‰é¡¹ï¼Œåœ¨æ¯æ¬¡ä¿®æ”¹æ‰§è¡Œå®Œæˆæ—¶ï¼Œä¸ä¼šç«‹å³å°†ä¿®æ”¹çš„ç´¢å¼•æ•°æ®å†™å…¥ç£ç›˜ï¼Œè€Œæ˜¯ä¼šå†™åˆ°å†…å­˜ä¸­çš„é”®ç¼“å†²åŒºï¼Œåªæœ‰åœ¨æ¸…ç†é”®ç¼“å†²åŒºæˆ–è€…å…³é—­è¡¨çš„æ—¶å€™æ‰ä¼šå°†å¯¹åº”çš„ç´¢å¼•å—å†™å…¥ç£ç›˜ã€‚è¿™ç§æ–¹å¼å¯ä»¥æžå¤§çš„æå‡å†™å…¥æ€§èƒ½ï¼Œä½†æ˜¯åœ¨æ•°æ®åº“æˆ–è€…ä¸»æœºå´©æºƒæ—¶ä¼šé€ æˆç´¢å¼•æŸåï¼Œéœ€è¦æ‰§è¡Œä¿®å¤æ“ä½œã€‚

#### [](#æ¯”è¾ƒ "æ¯”è¾ƒ")æ¯”è¾ƒ

-   **äº‹åŠ¡**: InnoDB æ˜¯äº‹åŠ¡åž‹çš„ï¼Œå¯ä»¥ä½¿ç”¨ Commit å’Œ Rollback è¯­å¥ã€‚
-   **å¹¶å‘**: MyISAM åªæ”¯æŒè¡¨çº§é”ï¼Œè€Œ InnoDB è¿˜æ”¯æŒè¡Œçº§é”ã€‚
-   **å¤–é”®**: InnoDB æ”¯æŒå¤–é”®ã€‚
-   **å¤‡ä»½**: InnoDB æ”¯æŒåœ¨çº¿çƒ­å¤‡ä»½ã€‚
-   **å´©æºƒæ¢å¤**: MyISAM å´©æºƒåŽå‘ç”ŸæŸåçš„æ¦‚çŽ‡æ¯” InnoDB é«˜å¾ˆå¤šï¼Œè€Œä¸”æ¢å¤çš„é€Ÿåº¦ä¹Ÿæ›´æ…¢ã€‚
-   **å…¶å®ƒç‰¹æ€§**: MyISAM æ”¯æŒåŽ‹ç¼©è¡¨å’Œç©ºé—´æ•°æ®ç´¢å¼•ã€‚

### [](#MySQLæ˜¯å¦‚ä½•æ‰§è¡Œä¸€æ¡SQLçš„ "MySQL æ˜¯å¦‚ä½•æ‰§è¡Œä¸€æ¡ SQL çš„")MySQL æ˜¯å¦‚ä½•æ‰§è¡Œä¸€æ¡ SQL çš„

![](http://media.dreamcat.ink/uPic/SQL%E6%89%A7%E8%A1%8C%E7%9A%84%E5%85%A8%E9%83%A8%E8%BF%87%E7%A8%8B.png)

**MySQL å†…éƒ¨å¯ä»¥åˆ†ä¸ºæœåŠ¡å±‚å’Œå­˜å‚¨å¼•æ“Žå±‚ä¸¤éƒ¨åˆ†ï¼š**

1.  **æœåŠ¡å±‚åŒ…æ‹¬è¿žæŽ¥å™¨ã€æŸ¥è¯¢ç¼“å­˜ã€åˆ†æžå™¨ã€ä¼˜åŒ–å™¨ã€æ‰§è¡Œå™¨ç­‰**ï¼Œæ¶µç›– MySQL çš„å¤§å¤šæ•°æ ¸å¿ƒæœåŠ¡åŠŸèƒ½ï¼Œä»¥åŠæ‰€æœ‰çš„å†…ç½®å‡½æ•°ï¼ˆå¦‚æ—¥æœŸã€æ—¶é—´ã€æ•°å­¦å’ŒåŠ å¯†å‡½æ•°ç­‰ï¼‰ï¼Œæ‰€æœ‰è·¨å­˜å‚¨å¼•æ“Žçš„åŠŸèƒ½éƒ½åœ¨è¿™ä¸€å±‚å®žçŽ°ï¼Œæ¯”å¦‚å­˜å‚¨è¿‡ç¨‹ã€è§¦å‘å™¨ã€è§†å›¾ç­‰ã€‚
2.  **å­˜å‚¨å¼•æ“Žå±‚è´Ÿè´£æ•°æ®çš„å­˜å‚¨å’Œæå–ã€‚**å…¶æž¶æž„æ¨¡å¼æ˜¯æ’ä»¶å¼çš„ï¼Œæ”¯æŒ InnoDBã€MyISAMã€Memory ç­‰å¤šä¸ªå­˜å‚¨å¼•æ“Žã€‚çŽ°åœ¨æœ€å¸¸ç”¨çš„å­˜å‚¨å¼•æ“Žæ˜¯ InnoDBï¼Œå®ƒä»Ž MySQL 5.5.5 ç‰ˆæœ¬å¼€å§‹æˆä¸ºäº†é»˜è®¤çš„å­˜å‚¨å¼•æ“Žã€‚

**Server å±‚æŒ‰é¡ºåºæ‰§è¡Œ sql çš„æ­¥éª¤ä¸ºï¼š**

å®¢æˆ·ç«¯è¯·æ±‚ -> è¿žæŽ¥å™¨ï¼ˆéªŒè¯ç”¨æˆ·èº«ä»½ï¼Œç»™äºˆæƒé™ï¼‰ -> æŸ¥è¯¢ç¼“å­˜ï¼ˆå­˜åœ¨ç¼“å­˜åˆ™ç›´æŽ¥è¿”å›žï¼Œä¸å­˜åœ¨åˆ™æ‰§è¡ŒåŽç»­æ“ä½œï¼‰-> åˆ†æžå™¨ï¼ˆå¯¹ SQL è¿›è¡Œè¯æ³•åˆ†æžå’Œè¯­æ³•åˆ†æžæ“ä½œï¼‰ -> ä¼˜åŒ–å™¨ï¼ˆä¸»è¦å¯¹æ‰§è¡Œçš„ sql ä¼˜åŒ–é€‰æ‹©æœ€ä¼˜çš„æ‰§è¡Œæ–¹æ¡ˆæ–¹æ³•ï¼‰ -> æ‰§è¡Œå™¨ï¼ˆæ‰§è¡Œæ—¶ä¼šå…ˆçœ‹ç”¨æˆ·æ˜¯å¦æœ‰æ‰§è¡Œæƒé™ï¼Œæœ‰æ‰åŽ»ä½¿ç”¨è¿™ä¸ªå¼•æ“Žæä¾›çš„æŽ¥å£ï¼‰-> åŽ»å¼•æ“Žå±‚èŽ·å–æ•°æ®è¿”å›žï¼ˆå¦‚æžœå¼€å¯æŸ¥è¯¢ç¼“å­˜åˆ™ä¼šç¼“å­˜æŸ¥è¯¢ç»“æžœï¼‰

**ç®€å•æ¦‚æ‹¬**ï¼š

-   **è¿žæŽ¥å™¨**ï¼šç®¡ç†è¿žæŽ¥ã€æƒé™éªŒè¯ï¼›
-   **æŸ¥è¯¢ç¼“å­˜**ï¼šå‘½ä¸­ç¼“å­˜åˆ™ç›´æŽ¥è¿”å›žç»“æžœï¼›
-   **åˆ†æžå™¨**ï¼šå¯¹ SQL è¿›è¡Œè¯æ³•åˆ†æžã€è¯­æ³•åˆ†æžï¼›ï¼ˆåˆ¤æ–­æŸ¥è¯¢çš„ SQL å­—æ®µæ˜¯å¦å­˜åœ¨ä¹Ÿæ˜¯åœ¨è¿™æ­¥ï¼‰
-   **ä¼˜åŒ–å™¨**ï¼šæ‰§è¡Œè®¡åˆ’ç”Ÿæˆã€é€‰æ‹©ç´¢å¼•ï¼›
-   **æ‰§è¡Œå™¨**ï¼šæ“ä½œå¼•æ“Žã€è¿”å›žç»“æžœï¼›
-   **å­˜å‚¨å¼•æ“Ž**ï¼šå­˜å‚¨æ•°æ®ã€æä¾›è¯»å†™æŽ¥å£ã€‚

### [](#mysqlçš„acidåŽŸç† "mysql çš„ acid åŽŸç†")mysql çš„ acid åŽŸç†

**ACID å˜›ï¼ŒåŽŸå­æ€§ (Atomicity)ã€ä¸€è‡´æ€§ (Consistency)ã€éš”ç¦»æ€§ (Isolation)ã€æŒä¹…æ€§ (Durability)ï¼**

æˆ‘ä»¬ä»¥ä»Ž A è´¦æˆ·è½¬è´¦ 50 å…ƒåˆ° B è´¦æˆ·ä¸ºä¾‹è¿›è¡Œè¯´æ˜Žä¸€ä¸‹ ACIDï¼Œå››å¤§ç‰¹æ€§ã€‚

#### [](#åŽŸå­æ€§ "åŽŸå­æ€§")åŽŸå­æ€§

æ ¹æ®å®šä¹‰ï¼ŒåŽŸå­æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œå…¶ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½åšï¼Œè¦ä¹ˆéƒ½ä¸åšã€‚å³è¦ä¹ˆè½¬è´¦æˆåŠŸï¼Œè¦ä¹ˆè½¬è´¦å¤±è´¥ï¼Œæ˜¯ä¸å­˜åœ¨ä¸­é—´çš„çŠ¶æ€ï¼

**å¦‚æžœæ— æ³•ä¿è¯åŽŸå­æ€§ä¼šæ€Žä¹ˆæ ·ï¼Ÿ**

OKï¼Œå°±ä¼šå‡ºçŽ°**æ•°æ®ä¸ä¸€è‡´**çš„æƒ…å½¢ï¼ŒA è´¦æˆ·å‡åŽ» 50 å…ƒï¼Œè€Œ B è´¦æˆ·å¢žåŠ  50 å…ƒæ“ä½œå¤±è´¥ã€‚ç³»ç»Ÿå°†æ— æ•…ä¸¢å¤± 50 å…ƒï½ž

#### [](#éš”ç¦»æ€§ "éš”ç¦»æ€§")éš”ç¦»æ€§

æ ¹æ®å®šä¹‰ï¼Œéš”ç¦»æ€§æ˜¯æŒ‡å¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œçš„æ—¶å€™ï¼Œ**äº‹åŠ¡å†…éƒ¨çš„æ“ä½œä¸Žå…¶ä»–äº‹åŠ¡æ˜¯éš”ç¦»çš„**ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½äº’ç›¸å¹²æ‰°ã€‚

**å¦‚æžœæ— æ³•ä¿è¯éš”ç¦»æ€§ä¼šæ€Žä¹ˆæ ·ï¼Ÿ**

OKï¼Œå‡è®¾ A è´¦æˆ·æœ‰ 200 å…ƒï¼ŒB è´¦æˆ· 0 å…ƒã€‚A è´¦æˆ·å¾€ B è´¦æˆ·è½¬è´¦ä¸¤æ¬¡ï¼Œé‡‘é¢ä¸º 50 å…ƒï¼Œåˆ†åˆ«åœ¨ä¸¤ä¸ªäº‹åŠ¡ä¸­æ‰§è¡Œã€‚å¦‚æžœæ— æ³•ä¿è¯éš”ç¦»æ€§ï¼Œä¼šå‡ºçŽ°ä¸‹é¢çš„æƒ…å½¢

![](http://media.dreamcat.ink/uPic/%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E6%80%A7.png)

å¦‚å›¾æ‰€ç¤ºï¼Œå¦‚æžœä¸ä¿è¯éš”ç¦»æ€§ï¼ŒA æ‰£æ¬¾ä¸¤æ¬¡ï¼Œè€Œ B åªåŠ æ¬¾ä¸€æ¬¡ï¼Œå‡­ç©ºæ¶ˆå¤±äº† 50 å…ƒï¼Œä¾ç„¶å‡ºçŽ°äº†**æ•°æ®ä¸ä¸€è‡´**çš„æƒ…å½¢ï¼

#### [](#æŒä¹…æ€§ "æŒä¹…æ€§")æŒä¹…æ€§

æ ¹æ®å®šä¹‰ï¼Œ**æŒä¹…æ€§æ˜¯æŒ‡äº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“çš„æ”¹å˜å°±åº”è¯¥æ˜¯æ°¸ä¹…æ€§çš„**ã€‚æŽ¥ä¸‹æ¥çš„å…¶ä»–æ“ä½œæˆ–æ•…éšœä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ã€‚

**å¦‚æžœæ— æ³•ä¿è¯æŒä¹…æ€§ä¼šæ€Žä¹ˆæ ·ï¼Ÿ**

åœ¨ MySQL ä¸­ï¼Œä¸ºäº†è§£å†³ CPU å’Œç£ç›˜é€Ÿåº¦ä¸ä¸€è‡´é—®é¢˜ï¼ŒMySQL æ˜¯å°†ç£ç›˜ä¸Šçš„æ•°æ®åŠ è½½åˆ°å†…å­˜ï¼Œå¯¹å†…å­˜è¿›è¡Œæ“ä½œï¼Œç„¶åŽå†å›žå†™ç£ç›˜ã€‚å¥½ï¼Œå‡è®¾æ­¤æ—¶å®•æœºäº†ï¼Œåœ¨å†…å­˜ä¸­ä¿®æ”¹çš„æ•°æ®å…¨éƒ¨ä¸¢å¤±äº†ï¼ŒæŒä¹…æ€§å°±æ— æ³•ä¿è¯ã€‚

è®¾æƒ³ä¸€ä¸‹ï¼Œç³»ç»Ÿæç¤ºä½ è½¬è´¦æˆåŠŸã€‚ä½†æ˜¯ä½ å‘çŽ°é‡‘é¢æ²¡æœ‰å‘ç”Ÿä»»ä½•æ”¹å˜ï¼Œæ­¤æ—¶æ•°æ®å‡ºçŽ°äº†ä¸åˆæ³•çš„æ•°æ®çŠ¶æ€ï¼Œæˆ‘ä»¬å°†è¿™ç§çŠ¶æ€è®¤ä¸ºæ˜¯**æ•°æ®ä¸ä¸€è‡´**çš„æƒ…å½¢ã€‚

#### [](#ä¸€è‡´æ€§ "ä¸€è‡´æ€§")ä¸€è‡´æ€§

æ ¹æ®å®šä¹‰ï¼Œä¸€è‡´æ€§æ˜¯æŒ‡äº‹åŠ¡æ‰§è¡Œå‰åŽï¼Œæ•°æ®å¤„äºŽä¸€ç§åˆæ³•çš„çŠ¶æ€ï¼Œè¿™ç§çŠ¶æ€æ˜¯è¯­ä¹‰ä¸Šçš„è€Œä¸æ˜¯è¯­æ³•ä¸Šçš„ã€‚ é‚£ä»€ä¹ˆæ˜¯åˆæ³•çš„æ•°æ®çŠ¶æ€å‘¢ï¼Ÿ oKï¼Œè¿™ä¸ªçŠ¶æ€æ˜¯æ»¡è¶³é¢„å®šçš„çº¦æŸå°±å«åšåˆæ³•çš„çŠ¶æ€ï¼Œå†é€šä¿—ä¸€ç‚¹ï¼Œè¿™çŠ¶æ€æ˜¯ç”±ä½ è‡ªå·±æ¥å®šä¹‰çš„ã€‚**æ»¡è¶³è¿™ä¸ªçŠ¶æ€ï¼Œæ•°æ®å°±æ˜¯ä¸€è‡´çš„ï¼Œä¸æ»¡è¶³è¿™ä¸ªçŠ¶æ€ï¼Œæ•°æ®å°±æ˜¯ä¸ä¸€è‡´çš„**ï¼

**å¦‚æžœæ— æ³•ä¿è¯ä¸€è‡´æ€§ä¼šæ€Žä¹ˆæ ·ï¼Ÿ**

-   ä¾‹ä¸€ï¼šA è´¦æˆ·æœ‰ 200 å…ƒï¼Œè½¬è´¦ 300 å…ƒå‡ºåŽ»ï¼Œæ­¤æ—¶ A è´¦æˆ·ä½™é¢ä¸º - 100 å…ƒã€‚ä½ è‡ªç„¶å°±å‘çŽ°äº†æ­¤æ—¶æ•°æ®æ˜¯ä¸ä¸€è‡´çš„ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºä½ å®šä¹‰äº†ä¸€ä¸ªçŠ¶æ€ï¼Œä½™é¢è¿™åˆ—å¿…é¡»å¤§äºŽ 0ã€‚
-   ä¾‹äºŒï¼šA è´¦æˆ· 200 å…ƒï¼Œè½¬è´¦ 50 å…ƒç»™ B è´¦æˆ·ï¼ŒA è´¦æˆ·çš„é’±æ‰£äº†ï¼Œä½†æ˜¯ B è´¦æˆ·å› ä¸ºå„ç§æ„å¤–ï¼Œä½™é¢å¹¶æ²¡æœ‰å¢žåŠ ã€‚ä½ ä¹ŸçŸ¥é“æ­¤æ—¶æ•°æ®æ˜¯ä¸ä¸€è‡´çš„ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºä½ å®šä¹‰äº†ä¸€ä¸ªçŠ¶æ€ï¼Œè¦æ±‚ A+B çš„ä½™é¢å¿…é¡»ä¸å˜ã€‚

#### [](#mysqlæ€Žä¹ˆä¿è¯ä¸€è‡´æ€§ï¼Ÿ "mysql æ€Žä¹ˆä¿è¯ä¸€è‡´æ€§ï¼Ÿ")mysql æ€Žä¹ˆä¿è¯ä¸€è‡´æ€§ï¼Ÿ

OKï¼Œè¿™ä¸ªé—®é¢˜åˆ†ä¸ºä¸¤ä¸ªå±‚é¢æ¥è¯´ã€‚ **ä»Žæ•°æ®åº“å±‚é¢**ï¼Œæ•°æ®åº“é€šè¿‡åŽŸå­æ€§ã€éš”ç¦»æ€§ã€æŒä¹…æ€§æ¥ä¿è¯ä¸€è‡´æ€§ã€‚ä¹Ÿå°±æ˜¯è¯´ ACID å››å¤§ç‰¹æ€§ä¹‹ä¸­ï¼ŒC (ä¸€è‡´æ€§) æ˜¯ç›®çš„ï¼ŒA (åŽŸå­æ€§)ã€I (éš”ç¦»æ€§)ã€D (æŒä¹…æ€§) æ˜¯æ‰‹æ®µï¼Œæ˜¯ä¸ºäº†ä¿è¯ä¸€è‡´æ€§ï¼Œæ•°æ®åº“æä¾›çš„æ‰‹æ®µã€‚æ•°æ®åº“å¿…é¡»è¦å®žçŽ° AID ä¸‰å¤§ç‰¹æ€§ï¼Œæ‰æœ‰å¯èƒ½å®žçŽ°ä¸€è‡´æ€§ã€‚ä¾‹å¦‚ï¼ŒåŽŸå­æ€§æ— æ³•ä¿è¯ï¼Œæ˜¾ç„¶ä¸€è‡´æ€§ä¹Ÿæ— æ³•ä¿è¯ã€‚

ä½†æ˜¯ï¼Œå¦‚æžœä½ åœ¨äº‹åŠ¡é‡Œæ•…æ„å†™å‡ºè¿åçº¦æŸçš„ä»£ç ï¼Œä¸€è‡´æ€§è¿˜æ˜¯æ— æ³•ä¿è¯çš„ã€‚ä¾‹å¦‚ï¼Œä½ åœ¨è½¬è´¦çš„ä¾‹å­ä¸­ï¼Œä½ çš„ä»£ç é‡Œæ•…æ„ä¸ç»™ B è´¦æˆ·åŠ é’±ï¼Œé‚£ä¸€è‡´æ€§è¿˜æ˜¯æ— æ³•ä¿è¯ã€‚å› æ­¤ï¼Œè¿˜å¿…é¡»ä»Žåº”ç”¨å±‚è§’åº¦è€ƒè™‘ã€‚

**ä»Žåº”ç”¨å±‚é¢**ï¼Œé€šè¿‡ä»£ç åˆ¤æ–­æ•°æ®åº“æ•°æ®æ˜¯å¦æœ‰æ•ˆï¼Œç„¶åŽå†³å®šå›žæ»šè¿˜æ˜¯æäº¤æ•°æ®ï¼

#### [](#mysqlæ€Žä¹ˆä¿è¯åŽŸå­æ€§ "mysql æ€Žä¹ˆä¿è¯åŽŸå­æ€§")mysql æ€Žä¹ˆä¿è¯åŽŸå­æ€§

OKï¼Œæ˜¯åˆ©ç”¨ Innodb çš„ `undo log`ã€‚ `undo log` åä¸ºå›žæ»šæ—¥å¿—ï¼Œæ˜¯å®žçŽ°åŽŸå­æ€§çš„å…³é”®ï¼Œå½“äº‹åŠ¡å›žæ»šæ—¶èƒ½å¤Ÿ**æ’¤é”€æ‰€æœ‰å·²ç»æˆåŠŸæ‰§è¡Œçš„ sql è¯­å¥**ï¼Œä»–éœ€è¦è®°å½•ä½ è¦å›žæ»šçš„ç›¸åº”æ—¥å¿—ä¿¡æ¯ã€‚ ä¾‹å¦‚

-   (1) å½“ä½  delete ä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œå°±éœ€è¦è®°å½•è¿™æ¡æ•°æ®çš„ä¿¡æ¯ï¼Œå›žæ»šçš„æ—¶å€™ï¼Œinsert è¿™æ¡æ—§æ•°æ®
-   (2) å½“ä½  update ä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œå°±éœ€è¦è®°å½•ä¹‹å‰çš„æ—§å€¼ï¼Œå›žæ»šçš„æ—¶å€™ï¼Œæ ¹æ®æ—§å€¼æ‰§è¡Œ update æ“ä½œ
-   (3) å½“å¹´ insert ä¸€æ¡æ•°æ®çš„æ—¶å€™ï¼Œå°±éœ€è¦è¿™æ¡è®°å½•çš„ä¸»é”®ï¼Œå›žæ»šçš„æ—¶å€™ï¼Œæ ¹æ®ä¸»é”®æ‰§è¡Œ delete æ“ä½œ

`undo log` è®°å½•äº†è¿™äº›å›žæ»šéœ€è¦çš„ä¿¡æ¯ï¼Œå½“äº‹åŠ¡æ‰§è¡Œå¤±è´¥æˆ–è°ƒç”¨äº† rollbackï¼Œå¯¼è‡´äº‹åŠ¡éœ€è¦å›žæ»šï¼Œä¾¿å¯ä»¥åˆ©ç”¨ undo log ä¸­çš„ä¿¡æ¯å°†æ•°æ®å›žæ»šåˆ°ä¿®æ”¹ä¹‹å‰çš„æ ·å­ã€‚

#### [](#mysqlæ€Žä¹ˆä¿è¯æŒä¹…æ€§çš„ "mysql æ€Žä¹ˆä¿è¯æŒä¹…æ€§çš„")mysql æ€Žä¹ˆä¿è¯æŒä¹…æ€§çš„

OKï¼Œæ˜¯åˆ©ç”¨ Innodb çš„ `redo log`ã€‚ æ­£å¦‚ä¹‹å‰è¯´çš„ï¼ŒMysql æ˜¯å…ˆæŠŠç£ç›˜ä¸Šçš„æ•°æ®åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œåœ¨å†…å­˜ä¸­å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œå†åˆ·å›žç£ç›˜ä¸Šã€‚å¦‚æžœæ­¤æ—¶çªç„¶å®•æœºï¼Œå†…å­˜ä¸­çš„æ•°æ®å°±ä¼šä¸¢å¤±ã€‚ _æ€Žä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ_ ç®€å•å•Šï¼Œäº‹åŠ¡æäº¤å‰ç›´æŽ¥æŠŠæ•°æ®å†™å…¥ç£ç›˜å°±è¡Œå•Šã€‚ _è¿™ä¹ˆåšæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ_

-   åªä¿®æ”¹ä¸€ä¸ªé¡µé¢é‡Œçš„ä¸€ä¸ªå­—èŠ‚ï¼Œå°±è¦å°†æ•´ä¸ªé¡µé¢åˆ·å…¥ç£ç›˜ï¼Œå¤ªæµªè´¹èµ„æºäº†ã€‚æ¯•ç«Ÿä¸€ä¸ªé¡µé¢ 16kb å¤§å°ï¼Œä½ åªæ”¹å…¶ä¸­ä¸€ç‚¹ç‚¹ä¸œè¥¿ï¼Œå°±è¦å°† 16kb çš„å†…å®¹åˆ·å…¥ç£ç›˜ï¼Œå¬ç€ä¹Ÿä¸åˆç†ã€‚
-   æ¯•ç«Ÿä¸€ä¸ªäº‹åŠ¡é‡Œçš„ SQL å¯èƒ½ç‰µæ¶‰åˆ°å¤šä¸ªæ•°æ®é¡µçš„ä¿®æ”¹ï¼Œè€Œè¿™äº›æ•°æ®é¡µå¯èƒ½ä¸æ˜¯ç›¸é‚»çš„ï¼Œä¹Ÿå°±æ˜¯å±žäºŽéšæœº IOã€‚æ˜¾ç„¶æ“ä½œéšæœº IOï¼Œé€Ÿåº¦ä¼šæ¯”è¾ƒæ…¢ã€‚

äºŽæ˜¯ï¼Œå†³å®šé‡‡ç”¨ `redo log` è§£å†³ä¸Šé¢çš„é—®é¢˜ã€‚å½“åšæ•°æ®ä¿®æ”¹çš„æ—¶å€™ï¼Œä¸ä»…åœ¨å†…å­˜ä¸­æ“ä½œï¼Œè¿˜ä¼šåœ¨ `redo log` ä¸­è®°å½•è¿™æ¬¡æ“ä½œã€‚å½“äº‹åŠ¡æäº¤çš„æ—¶å€™ï¼Œä¼šå°† `redo log` æ—¥å¿—è¿›è¡Œåˆ·ç›˜ (`redo log` ä¸€éƒ¨åˆ†åœ¨å†…å­˜ä¸­ï¼Œä¸€éƒ¨åˆ†åœ¨ç£ç›˜ä¸Š)ã€‚å½“æ•°æ®åº“å®•æœºé‡å¯çš„æ—¶å€™ï¼Œä¼šå°† `redo log` ä¸­çš„å†…å®¹æ¢å¤åˆ°æ•°æ®åº“ä¸­ï¼Œå†æ ¹æ® `undo log` å’Œ `binlog` å†…å®¹å†³å®šå›žæ»šæ•°æ®è¿˜æ˜¯æäº¤æ•°æ®ã€‚

**é‡‡ç”¨ redo log çš„å¥½å¤„ï¼Ÿ**

å…¶å®žå¥½å¤„å°±æ˜¯å°† `redo log` è¿›è¡Œåˆ·ç›˜æ¯”å¯¹æ•°æ®é¡µåˆ·ç›˜æ•ˆçŽ‡é«˜ï¼Œå…·ä½“è¡¨çŽ°å¦‚ä¸‹

-   `redo log` ä½“ç§¯å°ï¼Œæ¯•ç«Ÿåªè®°å½•äº†å“ªä¸€é¡µä¿®æ”¹äº†å•¥ï¼Œå› æ­¤ä½“ç§¯å°ï¼Œåˆ·ç›˜å¿«ã€‚
-   `redo log` æ˜¯ä¸€ç›´å¾€æœ«å°¾è¿›è¡Œè¿½åŠ ï¼Œå±žäºŽé¡ºåº IOã€‚æ•ˆçŽ‡æ˜¾ç„¶æ¯”éšæœº IO æ¥çš„å¿«ã€‚

#### [](#mysqlæ€Žä¹ˆä¿è¯éš”ç¦»æ€§ "mysql æ€Žä¹ˆä¿è¯éš”ç¦»æ€§")mysql æ€Žä¹ˆä¿è¯éš”ç¦»æ€§

åˆ©ç”¨çš„æ˜¯é”å’Œ MVCC æœºåˆ¶ã€‚

### [](#å¹¶å‘äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜ "å¹¶å‘äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜")å¹¶å‘äº‹åŠ¡å¸¦æ¥çš„é—®é¢˜

#### [](#è„è¯» "è„è¯»")è„è¯»

![](https://www.pdai.tech/_images/pics/dd782132-d830-4c55-9884-cfac0a541b8e.png)

#### [](#ä¸¢å¼ƒä¿®æ”¹ "ä¸¢å¼ƒä¿®æ”¹")ä¸¢å¼ƒä¿®æ”¹

T1 å’Œ T2 ä¸¤ä¸ªäº‹åŠ¡éƒ½å¯¹ä¸€ä¸ªæ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œ**T1 å…ˆä¿®æ”¹ï¼ŒT2 éšåŽä¿®æ”¹ï¼ŒT2 çš„ä¿®æ”¹è¦†ç›–äº† T1 çš„ä¿®æ”¹**ã€‚ä¾‹å¦‚ï¼šäº‹åŠ¡ 1 è¯»å–æŸè¡¨ä¸­çš„æ•°æ® A=20ï¼Œäº‹åŠ¡ 2 ä¹Ÿè¯»å– A=20ï¼Œäº‹åŠ¡ 1 ä¿®æ”¹ A=A-1ï¼Œäº‹åŠ¡ 2 ä¹Ÿä¿®æ”¹ A=A-1ï¼Œæœ€ç»ˆç»“æžœ A=19ï¼Œäº‹åŠ¡ 1 çš„ä¿®æ”¹è¢«ä¸¢å¤±ã€‚

![](https://www.pdai.tech/_images/pics/88ff46b3-028a-4dbb-a572-1f062b8b96d3.png)

#### [](#ä¸å¯é‡å¤è¯» "ä¸å¯é‡å¤è¯»")ä¸å¯é‡å¤è¯»

**T2 è¯»å–ä¸€ä¸ªæ•°æ®ï¼ŒT1 å¯¹è¯¥æ•°æ®åšäº†ä¿®æ”¹ã€‚å¦‚æžœ T2 å†æ¬¡è¯»å–è¿™ä¸ªæ•°æ®ï¼Œæ­¤æ—¶è¯»å–çš„ç»“æžœå’Œç¬¬ä¸€æ¬¡è¯»å–çš„ç»“æžœä¸åŒ**ã€‚

![](https://www.pdai.tech/_images/pics/c8d18ca9-0b09-441a-9a0c-fb063630d708.png)

#### [](#å¹»è¯» "å¹»è¯»")å¹»è¯»

**T1 è¯»å–æŸä¸ªèŒƒå›´çš„æ•°æ®ï¼ŒT2 åœ¨è¿™ä¸ªèŒƒå›´å†…æ’å…¥æ–°çš„æ•°æ®ï¼ŒT1 å†æ¬¡è¯»å–è¿™ä¸ªèŒƒå›´çš„æ•°æ®ï¼Œæ­¤æ—¶è¯»å–çš„ç»“æžœå’Œå’Œç¬¬ä¸€æ¬¡è¯»å–çš„ç»“æžœä¸åŒ**ã€‚

![](https://www.pdai.tech/_images/pics/72fe492e-f1cb-4cfc-92f8-412fb3ae6fec.png)

#### [](#ä¸å¯é‡å¤è¯»å’Œå¹»è¯»åŒºåˆ« "ä¸å¯é‡å¤è¯»å’Œå¹»è¯»åŒºåˆ«")ä¸å¯é‡å¤è¯»å’Œå¹»è¯»åŒºåˆ«

**ä¸å¯é‡å¤è¯»çš„é‡ç‚¹æ˜¯ä¿®æ”¹ï¼Œå¹»è¯»çš„é‡ç‚¹åœ¨äºŽæ–°å¢žæˆ–è€…åˆ é™¤**ã€‚

ä¾‹ 1ï¼ˆåŒæ ·çš„æ¡ä»¶ï¼Œä½ è¯»å–è¿‡çš„æ•°æ®ï¼Œå†æ¬¡è¯»å–å‡ºæ¥å‘çŽ°å€¼ä¸ä¸€æ ·äº† ï¼‰ï¼šäº‹åŠ¡ 1 ä¸­çš„ A å…ˆç”Ÿè¯»å–è‡ªå·±çš„å·¥èµ„ä¸º 1000 çš„æ“ ä½œè¿˜æ²¡å®Œæˆï¼Œäº‹åŠ¡ 2 ä¸­çš„ B å…ˆç”Ÿå°±ä¿®æ”¹äº† A çš„å·¥èµ„ä¸º 2000ï¼Œå¯¼ è‡´ A å†è¯»è‡ªå·±çš„å·¥èµ„æ—¶å·¥èµ„å˜ä¸º 2000ï¼›è¿™å°±æ˜¯ä¸å¯é‡å¤è¯»ã€‚

ä¾‹ 2ï¼ˆåŒæ ·çš„æ¡ä»¶ï¼Œç¬¬ 1 æ¬¡å’Œç¬¬ 2 æ¬¡è¯»å‡ºæ¥çš„è®°å½•æ•°ä¸ä¸€æ · ï¼‰ï¼šå‡æŸå·¥èµ„å•è¡¨ä¸­å·¥èµ„å¤§äºŽ 3000 çš„æœ‰ 4 äººï¼Œäº‹åŠ¡ 1 è¯»å–äº†æ‰€ æœ‰å·¥èµ„å¤§äºŽ 3000 çš„äººï¼Œå…±æŸ¥åˆ° 4 æ¡è®°å½•ï¼Œè¿™æ—¶äº‹åŠ¡ 2 åˆæ’å…¥äº†ä¸€æ¡å·¥èµ„å¤§äºŽ 3000 çš„è®°å½•ï¼Œäº‹åŠ¡ 1 å†æ¬¡è¯»å–æ—¶æŸ¥åˆ°çš„è®° å½•å°±å˜ä¸ºäº† 5 æ¡ï¼Œè¿™æ ·å°±å¯¼è‡´äº†å¹»è¯»ã€‚

### [](#æ•°æ®åº“çš„éš”ç¦»çº§åˆ« "æ•°æ®åº“çš„éš”ç¦»çº§åˆ«")æ•°æ®åº“çš„éš”ç¦»çº§åˆ«

1.  æœªæäº¤è¯»ï¼Œäº‹åŠ¡ä¸­å‘ç”Ÿäº†ä¿®æ”¹ï¼Œå³ä½¿æ²¡æœ‰æäº¤ï¼Œå…¶ä»–äº‹åŠ¡ä¹Ÿæ˜¯å¯è§çš„ï¼Œæ¯”å¦‚å¯¹äºŽä¸€ä¸ªæ•° A åŽŸæ¥ 50 ä¿®æ”¹ä¸º 100ï¼Œä½†æ˜¯æˆ‘è¿˜æ²¡æœ‰æäº¤ä¿®æ”¹ï¼Œå¦ä¸€ä¸ªäº‹åŠ¡çœ‹åˆ°è¿™ä¸ªä¿®æ”¹ï¼Œè€Œè¿™ä¸ªæ—¶å€™åŽŸäº‹åŠ¡å‘ç”Ÿäº†å›žæ»šï¼Œè¿™æ—¶å€™ A è¿˜æ˜¯ 50ï¼Œä½†æ˜¯å¦ä¸€ä¸ªäº‹åŠ¡çœ‹åˆ°çš„ A æ˜¯ 100. **å¯èƒ½ä¼šå¯¼è‡´è„è¯»ã€å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»**
2.  æäº¤è¯»ï¼Œå¯¹äºŽä¸€ä¸ªäº‹åŠ¡ä»Žå¼€å§‹ç›´åˆ°æäº¤ä¹‹å‰ï¼Œæ‰€åšçš„ä»»ä½•ä¿®æ”¹æ˜¯å…¶ä»–äº‹åŠ¡ä¸å¯è§çš„ï¼Œä¸¾ä¾‹å°±æ˜¯å¯¹äºŽä¸€ä¸ªæ•° A åŽŸæ¥æ˜¯ 50ï¼Œç„¶åŽæäº¤ä¿®æ”¹æˆ 100ï¼Œè¿™ä¸ªæ—¶å€™å¦ä¸€ä¸ªäº‹åŠ¡åœ¨ A æäº¤ä¿®æ”¹ä¹‹å‰ï¼Œè¯»å–çš„ A æ˜¯ 50ï¼Œåˆšè¯»å–å®Œï¼ŒA å°±è¢«ä¿®æ”¹æˆ 100ï¼Œè¿™ä¸ªæ—¶å€™å¦ä¸€ä¸ªäº‹åŠ¡å†è¿›è¡Œè¯»å–å‘çŽ° A å°±çªç„¶å˜æˆ 100 äº†ï¼›**å¯ä»¥é˜»æ­¢è„è¯»ï¼Œä½†æ˜¯å¹»è¯»æˆ–ä¸å¯é‡å¤è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿ**
3.  å¯é‡å¤è¯»ï¼Œå°±æ˜¯å¯¹ä¸€ä¸ªè®°å½•è¯»å–å¤šæ¬¡çš„è®°å½•æ˜¯ç›¸åŒçš„ï¼Œæ¯”å¦‚å¯¹äºŽä¸€ä¸ªæ•° A è¯»å–çš„è¯ä¸€ç›´æ˜¯ Aï¼Œå‰åŽä¸¤æ¬¡è¯»å–çš„ A æ˜¯ä¸€è‡´çš„ï¼›**å¯ä»¥é˜»æ­¢è„è¯»å’Œä¸å¯é‡å¤è¯»ï¼Œä½†å¹»è¯»ä»æœ‰å¯èƒ½å‘ç”Ÿã€‚**
4.  å¯ä¸²è¡ŒåŒ–è¯»ï¼Œåœ¨å¹¶å‘æƒ…å†µä¸‹ï¼Œå’Œä¸²è¡ŒåŒ–çš„è¯»å–çš„ç»“æžœæ˜¯ä¸€è‡´çš„ï¼Œæ²¡æœ‰ä»€ä¹ˆä¸åŒï¼Œæ¯”å¦‚ä¸ä¼šå‘ç”Ÿè„è¯»å’Œå¹»è¯»ï¼›**è¯¥çº§åˆ«å¯ä»¥é˜²æ­¢è„è¯»ã€ä¸å¯é‡å¤è¯»ä»¥åŠå¹»è¯»ã€‚**

| éš”ç¦»çº§åˆ«             | è„è¯»  | ä¸å¯é‡å¤è¯» | å¹»å½±è¯» |
| ---------------- | --- | ----- | --- |
| READ-UNCOMMITTED | âˆš   | âˆš     | âˆš   |
| READ-COMMITTED   | Ã—   | âˆš     | âˆš   |
| REPEATABLE-READ  | Ã—   | Ã—     | âˆš   |
| SERIALIZABLE     | Ã—   | Ã—     | Ã—   |

MySQL InnoDB å­˜å‚¨å¼•æ“Žçš„é»˜è®¤æ”¯æŒçš„éš”ç¦»çº§åˆ«æ˜¯ REPEATABLE-READï¼ˆå¯é‡è¯»ï¼‰ã€‚

**è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯**ï¼šä¸Ž SQL æ ‡å‡†ä¸åŒçš„åœ°æ–¹åœ¨äºŽ InnoDB å­˜å‚¨å¼•æ“Žåœ¨ REPEATABLE-READï¼ˆå¯é‡è¯»ï¼‰äº‹åŠ¡éš”ç¦»çº§åˆ« ä¸‹ä½¿ç”¨çš„æ˜¯ **Next-Key Lock é”**ç®—æ³•ï¼Œå› æ­¤å¯ä»¥é¿å…å¹»è¯»çš„äº§ç”Ÿï¼Œè¿™ä¸Žå…¶ä»–æ•°æ®åº“ç³»ç»Ÿ (å¦‚ SQL Server) æ˜¯ä¸åŒçš„ã€‚æ‰€ä»¥ è¯´ InnoDB å­˜å‚¨å¼•æ“Žçš„é»˜è®¤æ”¯æŒçš„éš”ç¦»çº§åˆ«æ˜¯ REPEATABLE-READï¼ˆå¯é‡è¯»ï¼‰ å·²ç»å¯ä»¥å®Œå…¨ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ€§è¦ æ±‚ï¼Œå³è¾¾åˆ°äº† SQL æ ‡å‡†çš„ SERIALIZABLE (å¯ä¸²è¡ŒåŒ–) éš”ç¦»çº§åˆ«ã€‚

å› ä¸ºéš”ç¦»çº§åˆ«è¶Šä½Žï¼Œäº‹åŠ¡è¯·æ±‚çš„é”è¶Šå°‘ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†æ•°æ®åº“ç³»ç»Ÿçš„éš”ç¦»çº§åˆ«éƒ½æ˜¯ READ-COMMITTED (è¯»å–æäº¤å†… å®¹):ï¼Œä½†æ˜¯ä½ è¦çŸ¥é“çš„æ˜¯ InnoDB å­˜å‚¨å¼•æ“Žé»˜è®¤ä½¿ç”¨ **REPEATABLE-READï¼ˆå¯é‡è¯»ï¼‰å¹¶ä¸ä¼šæœ‰ä»»ä½•æ€§èƒ½æŸå¤±**ã€‚

InnoDB å­˜å‚¨å¼•æ“Žåœ¨åˆ†å¸ƒå¼äº‹åŠ¡ çš„æƒ…å†µä¸‹ä¸€èˆ¬ä¼šç”¨åˆ° SERIALIZABLE (å¯ä¸²è¡ŒåŒ–) éš”ç¦»çº§åˆ«ã€‚

### [](#ä¸ºä»€ä¹ˆä½¿ç”¨ç´¢å¼• "ä¸ºä»€ä¹ˆä½¿ç”¨ç´¢å¼•")ä¸ºä»€ä¹ˆä½¿ç”¨ç´¢å¼•

-   é€šè¿‡åˆ›å»º**å”¯ä¸€æ€§ç´¢å¼•**ï¼Œå¯ä»¥ä¿è¯æ•°æ®åº“è¡¨ä¸­æ¯ä¸€è¡Œæ•°æ®çš„å”¯ä¸€æ€§ã€‚
-   å¯ä»¥å¤§å¤§**åŠ å¿«æ•°æ®çš„æ£€ç´¢é€Ÿåº¦**ï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºç´¢å¼•çš„æœ€ä¸»è¦çš„åŽŸå› ã€‚
-   å¸®åŠ©æœåŠ¡å™¨**é¿å…æŽ’åºå’Œä¸´æ—¶è¡¨**
-   å°†**éšæœº IO å˜ä¸ºé¡ºåº IO**ã€‚
-   å¯ä»¥åŠ é€Ÿ**è¡¨å’Œè¡¨ä¹‹é—´çš„è¿žæŽ¥**ï¼Œç‰¹åˆ«æ˜¯åœ¨å®žçŽ°æ•°æ®çš„å‚è€ƒå®Œæ•´æ€§æ–¹é¢ç‰¹åˆ«æœ‰æ„ä¹‰ã€‚

### [](#ç´¢å¼•è¿™ä¹ˆå¤šä¼˜ç‚¹ï¼Œä¸ºä»€ä¹ˆä¸å¯¹è¡¨æ€»çš„æ¯ä¸€åˆ—åˆ›å»ºä¸€ä¸ªç´¢å¼• "ç´¢å¼•è¿™ä¹ˆå¤šä¼˜ç‚¹ï¼Œä¸ºä»€ä¹ˆä¸å¯¹è¡¨æ€»çš„æ¯ä¸€åˆ—åˆ›å»ºä¸€ä¸ªç´¢å¼•")ç´¢å¼•è¿™ä¹ˆå¤šä¼˜ç‚¹ï¼Œä¸ºä»€ä¹ˆä¸å¯¹è¡¨æ€»çš„æ¯ä¸€åˆ—åˆ›å»ºä¸€ä¸ªç´¢å¼•

-   å½“å¯¹è¡¨ä¸­çš„æ•°æ®è¿›è¡Œå¢žåŠ ã€åˆ é™¤å’Œä¿®æ”¹çš„æ—¶å€™ï¼Œ**ç´¢å¼•ä¹Ÿè¦åŠ¨æ€çš„ç»´æŠ¤**ï¼Œè¿™æ ·å°±é™ä½Žäº†æ•°æ®çš„ç»´æŠ¤é€Ÿåº¦ã€‚
-   **ç´¢å¼•éœ€è¦å ç‰©ç†ç©ºé—´**ï¼Œé™¤äº†æ•°æ®è¡¨å æ•°æ®ç©ºé—´ä¹‹å¤–ï¼Œæ¯ä¸€ä¸ªç´¢å¼•è¿˜è¦å ä¸€å®šçš„ç‰©ç†ç©ºé—´ï¼Œå¦‚æžœè¦å»ºç«‹ç°‡ç´¢å¼•ï¼Œé‚£ä¹ˆéœ€è¦çš„ç©ºé—´å°±ä¼šæ›´å¤§ã€‚
-   **åˆ›å»ºç´¢å¼•å’Œç»´æŠ¤ç´¢å¼•è¦è€—è´¹æ—¶é—´**ï¼Œè¿™ç§æ—¶é—´éšç€æ•°æ®é‡çš„å¢žåŠ è€Œå¢žåŠ 

### [](#ç´¢å¼•å¦‚ä½•æé«˜æŸ¥è¯¢é€Ÿåº¦çš„ "ç´¢å¼•å¦‚ä½•æé«˜æŸ¥è¯¢é€Ÿåº¦çš„")ç´¢å¼•å¦‚ä½•æé«˜æŸ¥è¯¢é€Ÿåº¦çš„

å°†æ— åºçš„æ•°æ®å˜æˆç›¸å¯¹æœ‰åºçš„æ•°æ®ï¼ˆå°±åƒæŸ¥æœ‰ç›®çš„ä¸€æ ·ï¼‰

### [](#ä½¿ç”¨ç´¢å¼•çš„æ³¨æ„äº‹é¡¹ "ä½¿ç”¨ç´¢å¼•çš„æ³¨æ„äº‹é¡¹")ä½¿ç”¨ç´¢å¼•çš„æ³¨æ„äº‹é¡¹

-   åœ¨ç»å¸¸éœ€è¦æœç´¢çš„åˆ—ä¸Šï¼Œå¯ä»¥åŠ å¿«æœç´¢çš„é€Ÿåº¦ï¼›
-   åœ¨ç»å¸¸ä½¿ç”¨åœ¨ where å­å¥ä¸­çš„åˆ—ä¸Šé¢åˆ›å»ºç´¢å¼•ï¼ŒåŠ å¿«æ¡ä»¶çš„åˆ¤æ–­é€Ÿåº¦ã€‚
-   åœ¨ç»å¸¸éœ€è¦æŽ’åºçš„åˆ—ä¸Šåˆ›å»ºç´¢å¼•ï¼Œå› ä¸ºç´¢å¼•å·²ç»æŽ’åºï¼Œè¿™æ ·æŸ¥è¯¢å¯ä»¥åˆ©ç”¨ç´¢å¼•çš„æŽ’åºï¼ŒåŠ å¿«æŽ’åºæŸ¥è¯¢æ—¶é—´
-   åœ¨ä¸­åˆ°å¤§åž‹è¡¨ç´¢å¼•éƒ½æ˜¯éžå¸¸æœ‰æ•ˆçš„ï¼Œä½†æ˜¯ç‰¹å¤§åž‹è¡¨çš„ç»´æŠ¤å¼€é”€ä¼šå¾ˆå¤§ï¼Œä¸é€‚åˆå»ºç´¢å¼•
-   åœ¨ç»å¸¸ç”¨åˆ°è¿žç»­çš„åˆ—ä¸Šï¼Œè¿™äº›åˆ—ä¸»è¦æ˜¯ç”±ä¸€äº›å¤–é”®ï¼Œå¯ä»¥åŠ å¿«è¿žæŽ¥çš„é€Ÿåº¦
-   é¿å… where å­å¥ä¸­å¯¹å­—æ®µæ–½åŠ å‡½æ•°ï¼Œè¿™ä¼šé€ æˆæ— æ³•å‘½ä¸­ç´¢å¼•
-   åœ¨ä½¿ç”¨ InnoDB æ—¶ä½¿ç”¨ä¸Žä¸šåŠ¡æ— å…³çš„è‡ªå¢žä¸»é”®ä½œä¸ºä¸»é”®ï¼Œå³ä½¿ç”¨é€»è¾‘ä¸»é”®ï¼Œè€Œä¸è¦ä½¿ç”¨ä¸šåŠ¡ä¸»é”®ã€‚
-   **å°†æ‰“ç®—åŠ ç´¢å¼•çš„åˆ—è®¾ç½®ä¸º NOT NULLï¼Œå¦åˆ™å°†å¯¼è‡´å¼•æ“Žæ”¾å¼ƒä½¿ç”¨ç´¢å¼•è€Œè¿›è¡Œå…¨è¡¨æ‰«æ**
-   åˆ é™¤é•¿æœŸæœªä½¿ç”¨çš„ç´¢å¼•ï¼Œä¸ç”¨çš„ç´¢å¼•çš„å­˜åœ¨ä¼šé€ æˆä¸å¿…è¦çš„æ€§èƒ½æŸè€—
-   åœ¨ä½¿ç”¨ limit offset æŸ¥è¯¢ç¼“å­˜æ—¶ï¼Œå¯ä»¥å€ŸåŠ©ç´¢å¼•æ¥æé«˜æ€§èƒ½ã€‚

### [](#MySQLç´¢å¼•ä¸»è¦ä½¿ç”¨çš„ä¸¤ç§æ•°æ®ç»“æž„ "MySQL ç´¢å¼•ä¸»è¦ä½¿ç”¨çš„ä¸¤ç§æ•°æ®ç»“æž„")MySQL ç´¢å¼•ä¸»è¦ä½¿ç”¨çš„ä¸¤ç§æ•°æ®ç»“æž„

-   **å“ˆå¸Œç´¢å¼•**ï¼Œå¯¹äºŽå“ˆå¸Œç´¢å¼•æ¥è¯´ï¼Œåº•å±‚çš„æ•°æ®ç»“æž„è‚¯å®šæ˜¯å“ˆå¸Œè¡¨ï¼Œå› æ­¤åœ¨ç»å¤§å¤šæ•°éœ€æ±‚ä¸ºå•æ¡è®°å½•æŸ¥è¯¢çš„æ—¶å€™ï¼Œå¯ä»¥é€‰æ‹©å“ˆå¸Œç´¢å¼•ï¼ŒæŸ¥è¯¢æ€§èƒ½æœ€å¿«ï¼›å…¶ä½™å¤§éƒ¨åˆ†åœºæ™¯ï¼Œå»ºè®®é€‰æ‹© BTree ç´¢å¼•
-   **BTree ç´¢å¼•**ï¼ŒMysql çš„ BTree ç´¢å¼•ä½¿ç”¨çš„æ˜¯ B æ ‘ä¸­çš„ B+Tree ä½†å¯¹äºŽä¸»è¦çš„ä¸¤ç§å­˜å‚¨å¼•æ“Žï¼ˆMyISAM å’Œ InnoDBï¼‰çš„å®žçŽ°æ–¹å¼æ˜¯ä¸åŒçš„ã€‚

### [](#myisamå’Œinnodbå®žçŽ°btreeç´¢å¼•æ–¹å¼çš„åŒºåˆ« "myisam å’Œ innodb å®žçŽ° btree ç´¢å¼•æ–¹å¼çš„åŒºåˆ«")myisam å’Œ innodb å®žçŽ° btree ç´¢å¼•æ–¹å¼çš„åŒºåˆ«

-   MyISAMï¼Œ**B+Tree å¶èŠ‚ç‚¹çš„ data åŸŸå­˜æ”¾çš„æ˜¯æ•°æ®è®°å½•çš„åœ°å€**ï¼Œåœ¨ç´¢å¼•æ£€ç´¢çš„æ—¶å€™ï¼Œé¦–å…ˆæŒ‰ç…§ B+Tree æœç´¢ç®—æ³•æœç´¢ç´¢å¼•ï¼Œå¦‚æžœæŒ‡å®šçš„ key å­˜åœ¨ï¼Œåˆ™å–å‡ºå…¶ data åŸŸçš„å€¼ï¼Œç„¶åŽä»¥ data åŸŸçš„å€¼ä¸ºåœ°å€è¯»åŒºç›¸åº”çš„æ•°æ®è®°å½•ï¼Œè¿™è¢«ç§°ä¸º â€œéžèšç°‡ç´¢å¼•â€
-   InnoDBï¼Œå…¶æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯ç´¢å¼•æ–‡ä»¶ï¼Œç›¸æ¯” MyISAMï¼Œ**ç´¢å¼•æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶æ˜¯åˆ†ç¦»çš„**ï¼Œ**å…¶è¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯æŒ‰ B+Tree ç»„ç»‡çš„ä¸€ä¸ªç´¢å¼•ç»“æž„ï¼Œæ ‘çš„èŠ‚ç‚¹ data åŸŸä¿å­˜äº†å®Œæ•´çš„æ•°æ®è®°å½•**ï¼Œè¿™ä¸ªç´¢å¼•çš„ key æ˜¯æ•°æ®è¡¨çš„ä¸»é”®ï¼Œå› æ­¤ InnoDB è¡¨æ•°æ®æ–‡ä»¶æœ¬èº«å°±æ˜¯ä¸»ç´¢å¼•ã€‚è¿™è¢«ç§°ä¸º â€œèšç°‡ç´¢å¼•â€ æˆ–è€…èšé›†ç´¢å¼•ï¼Œè€Œå…¶ä½™çš„ç´¢å¼•éƒ½ä½œä¸ºè¾…åŠ©ç´¢å¼•ï¼Œè¾…åŠ©ç´¢å¼•çš„ data åŸŸå­˜å‚¨ç›¸åº”è®°å½•ä¸»é”®çš„å€¼è€Œä¸æ˜¯åœ°å€ï¼Œè¿™ä¹Ÿæ˜¯å’Œ MyISAM ä¸åŒçš„åœ°æ–¹ï¼Œåœ¨æ ¹æ®ä¸»ç´¢å¼•æœç´¢æ—¶ï¼Œç›´æŽ¥æ‰¾åˆ° key æ‰€åœ¨çš„èŠ‚ç‚¹å³å¯å–å‡ºæ•°æ®ï¼›åœ¨æ ¹æ®è¾…åŠ©ç´¢å¼•æŸ¥æ‰¾æ—¶ï¼Œåˆ™éœ€è¦å…ˆå–å‡ºä¸»é”®çš„å€¼ï¼Œåœ¨èµ°ä¸€éä¸»ç´¢å¼•ã€‚å› æ­¤ï¼Œåœ¨è®¾è®¡è¡¨çš„æ—¶å€™ï¼Œä¸å»ºè®®ä½¿ç”¨è¿‡é•¿çš„å­—æ®µä¸ºä¸»é”®ï¼Œä¹Ÿä¸å»ºè®®ä½¿ç”¨éžå•è°ƒçš„å­—æ®µä½œä¸ºä¸»é”®ï¼Œè¿™æ ·ä¼šé€ æˆä¸»ç´¢å¼•é¢‘ç¹åˆ†è£‚ã€‚

### [](#æ•°æ®åº“ç»“æž„ä¼˜åŒ– "æ•°æ®åº“ç»“æž„ä¼˜åŒ–")æ•°æ®åº“ç»“æž„ä¼˜åŒ–

-   **èŒƒå¼ä¼˜åŒ–**ï¼š æ¯”å¦‚æ¶ˆé™¤å†—ä½™ï¼ˆèŠ‚çœç©ºé—´ã€‚ã€‚ï¼‰
-   **åèŒƒå¼ä¼˜åŒ–**ï¼šæ¯”å¦‚é€‚å½“åŠ å†—ä½™ç­‰ï¼ˆå‡å°‘ joinï¼‰
-   **é™å®šæ•°æ®çš„èŒƒå›´**ï¼š åŠ¡å¿…ç¦æ­¢ä¸å¸¦ä»»ä½•é™åˆ¶æ•°æ®èŒƒå›´æ¡ä»¶çš„æŸ¥è¯¢è¯­å¥ã€‚æ¯”å¦‚ï¼šæˆ‘ä»¬å½“ç”¨æˆ·åœ¨æŸ¥è¯¢è®¢å•åŽ†å²çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥æŽ§åˆ¶åœ¨ä¸€ä¸ªæœˆçš„èŒƒå›´å†…ã€‚
-   **è¯» / å†™åˆ†ç¦»**ï¼š ç»å…¸çš„æ•°æ®åº“æ‹†åˆ†æ–¹æ¡ˆï¼Œä¸»åº“è´Ÿè´£å†™ï¼Œä»Žåº“è´Ÿè´£è¯»ï¼›
-   **æ‹†åˆ†è¡¨**ï¼šåˆ†åŒºå°†æ•°æ®åœ¨ç‰©ç†ä¸Šåˆ†éš”å¼€ï¼Œä¸åŒåˆ†åŒºçš„æ•°æ®å¯ä»¥åˆ¶å®šä¿å­˜åœ¨å¤„äºŽä¸åŒç£ç›˜ä¸Šçš„æ•°æ®æ–‡ä»¶é‡Œã€‚è¿™æ ·ï¼Œå½“å¯¹è¿™ä¸ªè¡¨è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œåªéœ€è¦åœ¨è¡¨åˆ†åŒºä¸­è¿›è¡Œæ‰«æï¼Œè€Œä¸å¿…è¿›è¡Œå…¨è¡¨æ‰«æï¼Œæ˜Žæ˜¾ç¼©çŸ­äº†æŸ¥è¯¢æ—¶é—´ï¼Œå¦å¤–å¤„äºŽä¸åŒç£ç›˜çš„åˆ†åŒºä¹Ÿå°†å¯¹è¿™ä¸ªè¡¨çš„æ•°æ®ä¼ è¾“åˆ†æ•£åœ¨ä¸åŒçš„ç£ç›˜ I/Oï¼Œä¸€ä¸ªç²¾å¿ƒè®¾ç½®çš„åˆ†åŒºå¯ä»¥å°†æ•°æ®ä¼ è¾“å¯¹ç£ç›˜ I/O ç«žäº‰å‡åŒ€åœ°åˆ†æ•£å¼€ã€‚å¯¹æ•°æ®é‡å¤§çš„æ—¶æ—¶è¡¨å¯é‡‡å–æ­¤æ–¹æ³•ã€‚å¯æŒ‰æœˆè‡ªåŠ¨å»ºè¡¨åˆ†åŒºã€‚

**æ‹†åˆ†å…¶å®žåˆåˆ†åž‚ç›´æ‹†åˆ†å’Œæ°´å¹³æ‹†åˆ†ï¼š**

-   æ¡ˆä¾‹ï¼š ç®€å•è´­ç‰©ç³»ç»Ÿæš‚è®¾æ¶‰åŠå¦‚ä¸‹è¡¨ï¼š
-   1. äº§å“è¡¨ï¼ˆæ•°æ®é‡ 10wï¼Œç¨³å®šï¼‰
-   2. è®¢å•è¡¨ï¼ˆæ•°æ®é‡ 200wï¼Œä¸”æœ‰å¢žé•¿è¶‹åŠ¿ï¼‰
-   3. ç”¨æˆ·è¡¨ ï¼ˆæ•°æ®é‡ 100wï¼Œä¸”æœ‰å¢žé•¿è¶‹åŠ¿ï¼‰
-   ä»¥ mysql ä¸ºä¾‹è®²è¿°ä¸‹æ°´å¹³æ‹†åˆ†å’Œåž‚ç›´æ‹†åˆ†ï¼Œmysql èƒ½å®¹å¿çš„æ•°é‡çº§åœ¨ç™¾ä¸‡é™æ€æ•°æ®å¯ä»¥åˆ°åƒä¸‡
-   **åž‚ç›´æ‹†åˆ†ï¼š**
    -   è§£å†³é—®é¢˜ï¼šè¡¨ä¸Žè¡¨ä¹‹é—´çš„ io ç«žäº‰
    -   ä¸è§£å†³é—®é¢˜ï¼šå•è¡¨ä¸­æ•°æ®é‡å¢žé•¿å‡ºçŽ°çš„åŽ‹åŠ›
    -   æ–¹æ¡ˆï¼š æŠŠäº§å“è¡¨å’Œç”¨æˆ·è¡¨æ”¾åˆ°ä¸€ä¸ª server ä¸Š è®¢å•è¡¨å•ç‹¬æ”¾åˆ°ä¸€ä¸ª server ä¸Š
-   **æ°´å¹³æ‹†åˆ†ï¼š**
    -   è§£å†³é—®é¢˜ï¼šå•è¡¨ä¸­æ•°æ®é‡å¢žé•¿å‡ºçŽ°çš„åŽ‹åŠ›
    -   ä¸è§£å†³é—®é¢˜ï¼šè¡¨ä¸Žè¡¨ä¹‹é—´çš„ io äº‰å¤º
-   æ–¹æ¡ˆï¼š**ç”¨æˆ·è¡¨** é€šè¿‡æ€§åˆ«æ‹†åˆ†ä¸ºç”·ç”¨æˆ·è¡¨å’Œå¥³ç”¨æˆ·è¡¨ï¼Œ**è®¢å•è¡¨** é€šè¿‡å·²å®Œæˆå’Œå®Œæˆä¸­æ‹†åˆ†ä¸ºå·²å®Œæˆè®¢å•å’Œæœªå®Œæˆè®¢å•ï¼Œ**äº§å“è¡¨** æœªå®Œæˆè®¢å•æ”¾ä¸€ä¸ª server ä¸Šï¼Œå·²å®Œæˆè®¢å•è¡¨ç›’ç”·ç”¨æˆ·è¡¨æ”¾ä¸€ä¸ª server ä¸Šï¼Œå¥³ç”¨æˆ·è¡¨æ”¾ä¸€ä¸ª server ä¸Š (å¥³çš„çˆ±è´­ç‰© å“ˆå“ˆ)ã€‚

### [](#ä¸»é”®è¶…é”®å€™é€‰é”®å¤–é”®æ˜¯ä»€ä¹ˆ "ä¸»é”®è¶…é”®å€™é€‰é”®å¤–é”®æ˜¯ä»€ä¹ˆ")ä¸»é”®è¶…é”®å€™é€‰é”®å¤–é”®æ˜¯ä»€ä¹ˆ

-   **è¶…é”®**ï¼šåœ¨å…³ç³»ä¸­èƒ½å”¯ä¸€æ ‡è¯†**å…ƒç»„çš„å±žæ€§é›†**ç§°ä¸ºå…³ç³»æ¨¡å¼çš„è¶…é”®
-   **å€™é€‰é”®**ï¼šä¸å«æœ‰**å¤šä½™å±žæ€§çš„è¶…é”®**ç§°ä¸ºå€™é€‰é”®ã€‚ä¹Ÿå°±æ˜¯åœ¨å€™é€‰é”®ä¸­ï¼Œè‹¥å†åˆ é™¤å±žæ€§ï¼Œå°±ä¸æ˜¯é”®äº†ï¼
-   **ä¸»é”®**ï¼š**ç”¨æˆ·é€‰ä½œå…ƒç»„æ ‡è¯†çš„ä¸€ä¸ªå€™é€‰é”®ç¨‹åºä¸»é”®**
-   **å¤–é”®**ï¼šå¦‚æžœå…³ç³»æ¨¡å¼ **R ä¸­å±žæ€§ K æ˜¯å…¶å®ƒæ¨¡å¼çš„ä¸»é”®**ï¼Œé‚£ä¹ˆ **k åœ¨æ¨¡å¼ R ä¸­ç§°ä¸ºå¤–é”®**ã€‚

**ä¸¾ä¾‹**ï¼š

| å­¦å·       | å§“å  | æ€§åˆ«  | å¹´é¾„  | ç³»åˆ«  | ä¸“ä¸š   |
| -------- | --- | --- | --- | --- | ---- |
| 20020612 | æŽè¾‰  | ç”·   | 20  | è®¡ç®—æœº | è½¯ä»¶å¼€å‘ |
| 20060613 | å¼ æ˜Ž  | ç”·   | 18  | è®¡ç®—æœº | è½¯ä»¶å¼€å‘ |
| 20060614 | çŽ‹å°çŽ‰ | å¥³   | 19  | ç‰©ç†  | åŠ›å­¦   |
| 20060615 | æŽæ·‘åŽ | å¥³   | 17  | ç”Ÿç‰©  | åŠ¨ç‰©å­¦  |
| 20060616 | èµµé™  | ç”·   | 21  | åŒ–å­¦  | é£Ÿå“åŒ–å­¦ |
| 20060617 | èµµé™  | å¥³   | 20  | ç”Ÿç‰©  | æ¤ç‰©å­¦  |

1.  è¶…é”®ï¼šäºŽæ˜¯æˆ‘ä»¬ä»Žä¾‹å­ä¸­å¯ä»¥å‘çŽ° å­¦å·æ˜¯æ ‡è¯†å­¦ç”Ÿå®žä½“çš„å”¯ä¸€æ ‡è¯†ã€‚é‚£ä¹ˆè¯¥å…ƒç»„çš„è¶…é”®å°±ä¸ºå­¦å·ã€‚é™¤æ­¤ä¹‹å¤–æˆ‘ä»¬è¿˜å¯ä»¥æŠŠå®ƒè·Ÿå…¶ä»–å±žæ€§ç»„åˆèµ·æ¥ï¼Œæ¯”å¦‚ï¼š(`å­¦å·`ï¼Œ`æ€§åˆ«`)ï¼Œ(`å­¦å·`ï¼Œ`å¹´é¾„`)
2.  å€™é€‰é”®ï¼šæ ¹æ®ä¾‹å­å¯çŸ¥ï¼Œå­¦å·æ˜¯ä¸€ä¸ªå¯ä»¥å”¯ä¸€æ ‡è¯†å…ƒç»„çš„å”¯ä¸€æ ‡è¯†ï¼Œå› æ­¤å­¦å·æ˜¯ä¸€ä¸ªå€™é€‰é”®ï¼Œå®žé™…ä¸Šï¼Œå€™é€‰é”®æ˜¯è¶…é”®çš„å­é›†ï¼Œæ¯”å¦‚ ï¼ˆå­¦å·ï¼Œå¹´é¾„ï¼‰æ˜¯è¶…é”®ï¼Œä½†æ˜¯å®ƒä¸æ˜¯å€™é€‰é”®ã€‚å› ä¸ºå®ƒè¿˜æœ‰äº†é¢å¤–çš„å±žæ€§ã€‚
3.  ä¸»é”®ï¼šç®€å•çš„è¯´ï¼Œä¾‹å­ä¸­çš„å…ƒç»„çš„å€™é€‰é”®ä¸ºå­¦å·ï¼Œä½†æ˜¯æˆ‘ä»¬é€‰å®šä»–ä½œä¸ºè¯¥å…ƒç»„çš„å”¯ä¸€æ ‡è¯†ï¼Œé‚£ä¹ˆå­¦å·å°±ä¸ºä¸»é”®ã€‚
4.  å¤–é”®æ˜¯ç›¸å¯¹äºŽä¸»é”®çš„ï¼Œæ¯”å¦‚åœ¨å­¦ç”Ÿè®°å½•é‡Œï¼Œä¸»é”®ä¸ºå­¦å·ï¼Œåœ¨æˆç»©å•è¡¨ä¸­ä¹Ÿæœ‰å­¦å·å­—æ®µï¼Œå› æ­¤å­¦å·ä¸ºæˆç»©å•è¡¨çš„å¤–é”®ï¼Œä¸ºå­¦ç”Ÿè¡¨çš„ä¸»é”®ã€‚

**ä¸»é”®ä¸ºå€™é€‰é”®çš„å­é›†ï¼Œå€™é€‰é”®ä¸ºè¶…é”®çš„å­é›†ï¼Œè€Œå¤–é”®çš„ç¡®å®šæ˜¯ç›¸å¯¹äºŽä¸»é”®çš„ã€‚**

### [](#drop-deleteä¸Žtruncateçš„åŒºåˆ« "drop,delete ä¸Ž truncate çš„åŒºåˆ«")drop,delete ä¸Ž truncate çš„åŒºåˆ«

-   drop ç›´æŽ¥åˆ æŽ‰è¡¨ï¼›
-   truncate åˆ é™¤è¡¨ä¸­æ•°æ®ï¼Œå†æ’å…¥æ—¶è‡ªå¢žé•¿ id åˆä»Ž 1 å¼€å§‹ï¼›
-   delete åˆ é™¤è¡¨ä¸­æ•°æ®ï¼Œå¯ä»¥åŠ  where å­—å¥ã€‚

1.  DELETE è¯­å¥æ‰§è¡Œåˆ é™¤çš„è¿‡ç¨‹æ˜¯æ¯æ¬¡ä»Žè¡¨ä¸­åˆ é™¤ä¸€è¡Œï¼Œå¹¶ä¸”åŒæ—¶å°†è¯¥è¡Œçš„åˆ é™¤æ“ä½œä½œä¸ºäº‹åŠ¡è®°å½•åœ¨æ—¥å¿—ä¸­ä¿å­˜ä»¥ä¾¿è¿›è¡Œè¿›è¡Œå›žæ»šæ“ä½œã€‚TRUNCATE TABLE åˆ™ä¸€æ¬¡æ€§åœ°ä»Žè¡¨ä¸­åˆ é™¤æ‰€æœ‰çš„æ•°æ®å¹¶ä¸æŠŠå•ç‹¬çš„åˆ é™¤æ“ä½œè®°å½•è®°å…¥æ—¥å¿—ä¿å­˜ï¼Œåˆ é™¤è¡Œæ˜¯ä¸èƒ½æ¢å¤çš„ã€‚å¹¶ä¸”åœ¨åˆ é™¤çš„è¿‡ç¨‹ä¸­ä¸ä¼šæ¿€æ´»ä¸Žè¡¨æœ‰å…³çš„åˆ é™¤è§¦å‘å™¨ã€‚æ‰§è¡Œé€Ÿåº¦å¿«ã€‚
2.  è¡¨å’Œç´¢å¼•æ‰€å ç©ºé—´ã€‚å½“è¡¨è¢« TRUNCATE åŽï¼Œè¿™ä¸ªè¡¨å’Œç´¢å¼•æ‰€å ç”¨çš„ç©ºé—´ä¼šæ¢å¤åˆ°åˆå§‹å¤§å°ï¼Œè€Œ DELETE æ“ä½œä¸ä¼šå‡å°‘è¡¨æˆ–ç´¢å¼•æ‰€å ç”¨çš„ç©ºé—´ã€‚drop è¯­å¥å°†è¡¨æ‰€å ç”¨çš„ç©ºé—´å…¨é‡Šæ”¾æŽ‰ã€‚
3.  ä¸€èˆ¬è€Œè¨€ï¼Œdrop > truncate > delete
4.  åº”ç”¨èŒƒå›´ã€‚TRUNCATE åªèƒ½å¯¹ TABLEï¼›DELETE å¯ä»¥æ˜¯ table å’Œ view
5.  TRUNCATE å’Œ DELETE åªåˆ é™¤æ•°æ®ï¼Œè€Œ DROP åˆ™åˆ é™¤æ•´ä¸ªè¡¨ï¼ˆç»“æž„å’Œæ•°æ®ï¼‰ã€‚
6.  truncate ä¸Žä¸å¸¦ where çš„ delete ï¼šåªåˆ é™¤æ•°æ®ï¼Œè€Œä¸åˆ é™¤è¡¨çš„ç»“æž„ï¼ˆå®šä¹‰ï¼‰drop è¯­å¥å°†åˆ é™¤è¡¨çš„ç»“æž„è¢«ä¾èµ–çš„çº¦æŸï¼ˆconstrain), è§¦å‘å™¨ï¼ˆtrigger) ç´¢å¼•ï¼ˆindex); ä¾èµ–äºŽè¯¥è¡¨çš„å­˜å‚¨è¿‡ç¨‹ / å‡½æ•°å°†è¢«ä¿ç•™ï¼Œä½†å…¶çŠ¶æ€ä¼šå˜ä¸ºï¼šinvalidã€‚
7.  delete è¯­å¥ä¸º DMLï¼ˆData Manipulation Language), è¿™ä¸ªæ“ä½œä¼šè¢«æ”¾åˆ° rollback segment ä¸­ï¼Œäº‹åŠ¡æäº¤åŽæ‰ç”Ÿæ•ˆã€‚å¦‚æžœæœ‰ç›¸åº”çš„ tigger, æ‰§è¡Œçš„æ—¶å€™å°†è¢«è§¦å‘ã€‚
8.  truncateã€drop æ˜¯ DDLï¼ˆData Define Language), æ“ä½œç«‹å³ç”Ÿæ•ˆï¼ŒåŽŸæ•°æ®ä¸æ”¾åˆ° rollback segment ä¸­ï¼Œä¸èƒ½å›žæ»š
9.  åœ¨æ²¡æœ‰å¤‡ä»½æƒ…å†µä¸‹ï¼Œè°¨æ…Žä½¿ç”¨ drop ä¸Ž truncateã€‚è¦åˆ é™¤éƒ¨åˆ†æ•°æ®è¡Œé‡‡ç”¨ delete ä¸”æ³¨æ„ç»“åˆ where æ¥çº¦æŸå½±å“èŒƒå›´ã€‚å›žæ»šæ®µè¦è¶³å¤Ÿå¤§ã€‚è¦åˆ é™¤è¡¨ç”¨ drop; è‹¥æƒ³ä¿ç•™è¡¨è€Œå°†è¡¨ä¸­æ•°æ®åˆ é™¤ï¼Œå¦‚æžœäºŽäº‹åŠ¡æ— å…³ï¼Œç”¨ truncate å³å¯å®žçŽ°ã€‚å¦‚æžœå’Œäº‹åŠ¡æœ‰å…³ï¼Œæˆ–è€æ˜¯æƒ³è§¦å‘ trigger, è¿˜æ˜¯ç”¨ deleteã€‚
10. Truncate table è¡¨å é€Ÿåº¦å¿«ï¼Œè€Œä¸”æ•ˆçŽ‡é«˜ï¼Œå› ä¸º: truncate table åœ¨åŠŸèƒ½ä¸Šä¸Žä¸å¸¦ WHERE å­å¥çš„ DELETE è¯­å¥ç›¸åŒï¼šäºŒè€…å‡åˆ é™¤è¡¨ä¸­çš„å…¨éƒ¨è¡Œã€‚ä½† TRUNCATE TABLE æ¯” DELETE é€Ÿåº¦å¿«ï¼Œä¸”ä½¿ç”¨çš„ç³»ç»Ÿå’Œäº‹åŠ¡æ—¥å¿—èµ„æºå°‘ã€‚DELETE è¯­å¥æ¯æ¬¡åˆ é™¤ä¸€è¡Œï¼Œå¹¶åœ¨äº‹åŠ¡æ—¥å¿—ä¸­ä¸ºæ‰€åˆ é™¤çš„æ¯è¡Œè®°å½•ä¸€é¡¹ã€‚TRUNCATE TABLE é€šè¿‡é‡Šæ”¾å­˜å‚¨è¡¨æ•°æ®æ‰€ç”¨çš„æ•°æ®é¡µæ¥åˆ é™¤æ•°æ®ï¼Œå¹¶ä¸”åªåœ¨äº‹åŠ¡æ—¥å¿—ä¸­è®°å½•é¡µçš„é‡Šæ”¾ã€‚
11. TRUNCATE TABLE åˆ é™¤è¡¨ä¸­çš„æ‰€æœ‰è¡Œï¼Œä½†è¡¨ç»“æž„åŠå…¶åˆ—ã€çº¦æŸã€ç´¢å¼•ç­‰ä¿æŒä¸å˜ã€‚æ–°è¡Œæ ‡è¯†æ‰€ç”¨çš„è®¡æ•°å€¼é‡ç½®ä¸ºè¯¥åˆ—çš„ç§å­ã€‚å¦‚æžœæƒ³ä¿ç•™æ ‡è¯†è®¡æ•°å€¼ï¼Œè¯·æ”¹ç”¨ DELETEã€‚å¦‚æžœè¦åˆ é™¤è¡¨å®šä¹‰åŠå…¶æ•°æ®ï¼Œè¯·ä½¿ç”¨ DROP TABLE è¯­å¥ã€‚
12. å¯¹äºŽç”± FOREIGN KEY çº¦æŸå¼•ç”¨çš„è¡¨ï¼Œä¸èƒ½ä½¿ç”¨ TRUNCATE TABLEï¼Œè€Œåº”ä½¿ç”¨ä¸å¸¦ WHERE å­å¥çš„ DELETE è¯­å¥ã€‚ç”±äºŽ TRUNCATE TABLE ä¸è®°å½•åœ¨æ—¥å¿—ä¸­ï¼Œæ‰€ä»¥å®ƒä¸èƒ½æ¿€æ´»è§¦å‘å™¨ã€‚

### [](#è§†å›¾çš„ä½œç”¨ï¼Œè§†å›¾å¯ä»¥æ›´æ”¹å— "è§†å›¾çš„ä½œç”¨ï¼Œè§†å›¾å¯ä»¥æ›´æ”¹å—")è§†å›¾çš„ä½œç”¨ï¼Œè§†å›¾å¯ä»¥æ›´æ”¹å—

è§†å›¾æ˜¯è™šæ‹Ÿçš„è¡¨ï¼Œä¸ŽåŒ…å«æ•°æ®çš„è¡¨ä¸ä¸€æ ·ï¼Œè§†å›¾åªåŒ…å«ä½¿ç”¨æ—¶åŠ¨æ€æ£€ç´¢æ•°æ®çš„æŸ¥è¯¢ï¼›ä¸åŒ…å«ä»»ä½•åˆ—æˆ–æ•°æ®ã€‚ä½¿ç”¨è§†å›¾å¯ä»¥ç®€åŒ–å¤æ‚çš„ sql æ“ä½œï¼Œéšè—å…·ä½“çš„ç»†èŠ‚ï¼Œä¿æŠ¤æ•°æ®ï¼›è§†å›¾åˆ›å»ºåŽï¼Œå¯ä»¥ä½¿ç”¨ä¸Žè¡¨ç›¸åŒçš„æ–¹å¼åˆ©ç”¨å®ƒä»¬ã€‚

è§†å›¾ä¸èƒ½è¢«ç´¢å¼•ï¼Œä¹Ÿä¸èƒ½æœ‰å…³è”çš„è§¦å‘å™¨æˆ–é»˜è®¤å€¼ï¼Œå¦‚æžœè§†å›¾æœ¬èº«å†…æœ‰ order by åˆ™å¯¹è§†å›¾å†æ¬¡ order by å°†è¢«è¦†ç›–ã€‚

åˆ›å»ºè§†å›¾ï¼š`create view xxx as xxxx`

å¯¹äºŽæŸäº›è§†å›¾æ¯”å¦‚æœªä½¿ç”¨è”ç»“å­æŸ¥è¯¢åˆ†ç»„èšé›†å‡½æ•° Distinct Union ç­‰ï¼Œæ˜¯å¯ä»¥å¯¹å…¶æ›´æ–°çš„ï¼Œå¯¹è§†å›¾çš„æ›´æ–°å°†å¯¹åŸºè¡¨è¿›è¡Œæ›´æ–°ï¼›ä½†æ˜¯è§†å›¾ä¸»è¦ç”¨äºŽç®€åŒ–æ£€ç´¢ï¼Œä¿æŠ¤æ•°æ®ï¼Œå¹¶ä¸ç”¨äºŽæ›´æ–°ï¼Œè€Œä¸”å¤§éƒ¨åˆ†è§†å›¾éƒ½ä¸å¯ä»¥æ›´æ–°ã€‚

### [](#æ•°æ®åº“èŒƒå¼ "æ•°æ®åº“èŒƒå¼")æ•°æ®åº“èŒƒå¼

#### [](#ç¬¬ä¸€èŒƒå¼ "ç¬¬ä¸€èŒƒå¼")ç¬¬ä¸€èŒƒå¼

åœ¨ä»»ä½•ä¸€ä¸ªå…³ç³»æ•°æ®åº“ä¸­ï¼Œç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰æ˜¯å¯¹å…³ç³»æ¨¡å¼çš„åŸºæœ¬è¦æ±‚ï¼Œä¸æ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰çš„æ•°æ®åº“å°±ä¸æ˜¯å…³ç³»æ•°æ®åº“ã€‚ æ‰€è°“ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰æ˜¯æŒ‡æ•°æ®åº“è¡¨çš„æ¯ä¸€åˆ—éƒ½æ˜¯ä¸å¯åˆ†å‰²çš„åŸºæœ¬æ•°æ®é¡¹ï¼ŒåŒä¸€åˆ—ä¸­ä¸èƒ½æœ‰å¤šä¸ªå€¼ï¼Œå³å®žä½“ä¸­çš„æŸä¸ªå±žæ€§ä¸èƒ½æœ‰å¤šä¸ªå€¼æˆ–è€…ä¸èƒ½æœ‰é‡å¤çš„å±žæ€§ã€‚å¦‚æžœå‡ºçŽ°é‡å¤çš„å±žæ€§ï¼Œå°±å¯èƒ½éœ€è¦å®šä¹‰ä¸€ä¸ªæ–°çš„å®žä½“ï¼Œæ–°çš„å®žä½“ç”±é‡å¤çš„å±žæ€§æž„æˆï¼Œæ–°å®žä½“ä¸ŽåŽŸå®žä½“ä¹‹é—´ä¸ºä¸€å¯¹å¤šå…³ç³»ã€‚åœ¨ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ä¸­è¡¨çš„æ¯ä¸€è¡ŒåªåŒ…å«ä¸€ä¸ªå®žä¾‹çš„ä¿¡æ¯ã€‚ç®€è€Œè¨€ä¹‹ï¼Œ**ç¬¬ä¸€èŒƒå¼å°±æ˜¯æ— é‡å¤çš„åˆ—**ã€‚

#### [](#ç¬¬äºŒèŒƒå¼ "ç¬¬äºŒèŒƒå¼")ç¬¬äºŒèŒƒå¼

ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰æ˜¯åœ¨ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰çš„åŸºç¡€ä¸Šå»ºç«‹èµ·æ¥çš„ï¼Œå³æ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰å¿…é¡»å…ˆæ»¡è¶³ç¬¬ä¸€èŒƒå¼ï¼ˆ1NFï¼‰ã€‚ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰è¦æ±‚æ•°æ®åº“è¡¨ä¸­çš„æ¯ä¸ªå®žä¾‹æˆ–è¡Œå¿…é¡»å¯ä»¥è¢«æƒŸä¸€åœ°åŒºåˆ†ã€‚ä¸ºå®žçŽ°åŒºåˆ†é€šå¸¸éœ€è¦ä¸ºè¡¨åŠ ä¸Šä¸€ä¸ªåˆ—ï¼Œä»¥å­˜å‚¨å„ä¸ªå®žä¾‹çš„æƒŸä¸€æ ‡è¯†ã€‚è¿™ä¸ªæƒŸä¸€å±žæ€§åˆ—è¢«ç§°ä¸ºä¸»å…³é”®å­—æˆ–ä¸»é”®ã€ä¸»ç ã€‚ ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰è¦æ±‚å®žä½“çš„å±žæ€§å®Œå…¨ä¾èµ–äºŽä¸»å…³é”®å­—ã€‚æ‰€è°“å®Œå…¨ä¾èµ–æ˜¯æŒ‡ä¸èƒ½å­˜åœ¨ä»…ä¾èµ–ä¸»å…³é”®å­—ä¸€éƒ¨åˆ†çš„å±žæ€§ï¼Œå¦‚æžœå­˜åœ¨ï¼Œé‚£ä¹ˆè¿™ä¸ªå±žæ€§å’Œä¸»å…³é”®å­—çš„è¿™ä¸€éƒ¨åˆ†åº”è¯¥åˆ†ç¦»å‡ºæ¥å½¢æˆä¸€ä¸ªæ–°çš„å®žä½“ï¼Œæ–°å®žä½“ä¸ŽåŽŸå®žä½“ä¹‹é—´æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»ã€‚ä¸ºå®žçŽ°åŒºåˆ†é€šå¸¸éœ€è¦ä¸ºè¡¨åŠ ä¸Šä¸€ä¸ªåˆ—ï¼Œä»¥å­˜å‚¨å„ä¸ªå®žä¾‹çš„æƒŸä¸€æ ‡è¯†ã€‚ç®€è€Œè¨€ä¹‹ï¼Œ**ç¬¬äºŒèŒƒå¼å°±æ˜¯éžä¸»å±žæ€§éžéƒ¨åˆ†ä¾èµ–äºŽä¸»å…³é”®å­—**ã€‚

#### [](#ç¬¬ä¸‰èŒƒå¼ "ç¬¬ä¸‰èŒƒå¼")ç¬¬ä¸‰èŒƒå¼

æ»¡è¶³ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰å¿…é¡»å…ˆæ»¡è¶³ç¬¬äºŒèŒƒå¼ï¼ˆ2NFï¼‰ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰è¦æ±‚ä¸€ä¸ªæ•°æ®åº“è¡¨ä¸­ä¸åŒ…å«å·²åœ¨å…¶å®ƒè¡¨ä¸­å·²åŒ…å«çš„éžä¸»å…³é”®å­—ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œ**å­˜åœ¨ä¸€ä¸ªéƒ¨é—¨ä¿¡æ¯è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªéƒ¨é—¨æœ‰éƒ¨é—¨ç¼–å·ï¼ˆdept_idï¼‰ã€éƒ¨é—¨åç§°ã€éƒ¨é—¨ç®€ä»‹ç­‰ä¿¡æ¯ã€‚é‚£ä¹ˆåœ¨å‘˜å·¥ä¿¡æ¯è¡¨ä¸­åˆ—å‡ºéƒ¨é—¨ç¼–å·åŽå°±ä¸èƒ½å†å°†éƒ¨é—¨åç§°ã€éƒ¨é—¨ç®€ä»‹ç­‰ä¸Žéƒ¨é—¨æœ‰å…³çš„ä¿¡æ¯å†åŠ å…¥å‘˜å·¥ä¿¡æ¯è¡¨ä¸­ã€‚å¦‚æžœä¸å­˜åœ¨éƒ¨é—¨ä¿¡æ¯è¡¨ï¼Œåˆ™æ ¹æ®ç¬¬ä¸‰èŒƒå¼ï¼ˆ3NFï¼‰ä¹Ÿåº”è¯¥æž„å»ºå®ƒï¼Œå¦åˆ™å°±ä¼šæœ‰å¤§é‡çš„æ•°æ®å†—ä½™ã€‚**ç®€è€Œè¨€ä¹‹ï¼Œç¬¬ä¸‰èŒƒå¼å°±æ˜¯å±žæ€§ä¸ä¾èµ–äºŽå…¶å®ƒéžä¸»å±žæ€§ã€‚ï¼ˆæˆ‘çš„ç†è§£æ˜¯æ¶ˆé™¤å†—ä½™ï¼‰

### [](#ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼• "ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•")ä»€ä¹ˆæ˜¯è¦†ç›–ç´¢å¼•

å¦‚æžœä¸€ä¸ªç´¢å¼•åŒ…å«ï¼ˆæˆ–è€…è¯´è¦†ç›–ï¼‰æ‰€æœ‰éœ€è¦æŸ¥è¯¢çš„å­—æ®µçš„å€¼ï¼Œæˆ‘ä»¬å°±ç§° ä¹‹ä¸º â€œè¦†ç›–ç´¢å¼•â€ã€‚æˆ‘ä»¬çŸ¥é“åœ¨ InnoDB å­˜å‚¨å¼• æ“Žä¸­ï¼Œå¦‚æžœä¸æ˜¯ä¸»é”®ç´¢å¼•ï¼Œå¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯ä¸»é”® + åˆ—å€¼ã€‚æœ€ç»ˆè¿˜æ˜¯è¦ â€œå›žè¡¨â€ï¼Œä¹Ÿå°±æ˜¯è¦é€šè¿‡ä¸»é”®å†æŸ¥æ‰¾ä¸€æ¬¡ï¼Œè¿™æ ·å°± ä¼šæ¯”è¾ƒæ…¢ã€‚è¦†ç›–ç´¢å¼•å°±æ˜¯æŠŠè¦æŸ¥è¯¢å‡ºçš„åˆ—å’Œç´¢å¼•æ˜¯å¯¹åº”çš„ï¼Œä¸åšå›žè¡¨æ“ä½œï¼

### [](#å„ç§æ ‘ "å„ç§æ ‘")å„ç§æ ‘

> è¿™é‡Œå°±ä¸å¤šä»‹ç»äº†ï¼Œæœ‰å…´è¶£å¯ä»¥åœ¨è¿™é‡Œçœ‹[å„ç§æ ‘](http://dreamcat.ink/2019/11/08/shu-ju-jie-gou-shu-ji-chu/)

> åˆ›ä½œä¸æ˜“å“‡ï¼Œè§‰å¾—æœ‰å¸®åŠ©çš„è¯ï¼Œç»™ä¸ªå°å°çš„ star å‘—ã€‚github åœ°å€ðŸ˜ðŸ˜ðŸ˜ 
>  [http://dreamcat.ink/2020/03/30/ge-ren-tu-xie-xi-lie-zong-jie-mysql/](http://dreamcat.ink/2020/03/30/ge-ren-tu-xie-xi-lie-zong-jie-mysql/)
